# 🔧 图书管理系统故障排除指南

## 🚨 常见问题及解决方案

### 1. Maven构建失败

#### 问题描述：
```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.6:resources
```

#### 解决方案：
1. **清理Maven缓存**：
   ```bash
   mvn clean
   ```

2. **删除本地仓库缓存**：
   ```bash
   # Windows
   rmdir /s /q %USERPROFILE%\.m2\repository
   
   # Linux/Mac
   rm -rf ~/.m2/repository
   ```

3. **使用更新的Maven版本**：
   - 下载Maven 3.8+版本
   - 更新环境变量

4. **检查网络连接**：
   - 确保能访问Maven中央仓库
   - 配置国内镜像源

### 2. 数据库连接失败

#### 问题描述：
```
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException
```

#### 解决方案：
1. **检查MySQL服务**：
   ```bash
   # Windows
   net start mysql
   
   # Linux
   sudo systemctl start mysql
   ```

2. **验证数据库配置**：
   - 检查 `jdbc.properties` 文件
   - 确认数据库名称、用户名、密码
   - 验证端口号（默认3306）

3. **创建数据库和表**：
   ```sql
   -- 执行 src/main/resources/init.sql
   source /path/to/init.sql;
   ```

4. **检查用户权限**：
   ```sql
   GRANT ALL PRIVILEGES ON ssm_db.* TO 'root'@'localhost';
   FLUSH PRIVILEGES;
   ```

### 3. 端口被占用

#### 问题描述：
```
[ERROR] Port 8080 is already in use
```

#### 解决方案：
1. **查找占用端口的进程**：
   ```bash
   # Windows
   netstat -ano | findstr :8080
   
   # Linux/Mac
   lsof -i :8080
   ```

2. **修改端口配置**：
   编辑 `pom.xml` 文件：
   ```xml
   <plugin>
     <groupId>org.apache.tomcat.maven</groupId>
     <artifactId>tomcat7-maven-plugin</artifactId>
     <configuration>
       <port>8081</port>  <!-- 改为其他端口 -->
     </configuration>
   </plugin>
   ```

3. **终止占用进程**：
   ```bash
   # Windows
   taskkill /PID <进程ID> /F
   
   # Linux/Mac
   kill -9 <进程ID>
   ```

### 4. 页面无法访问

#### 问题描述：
```
无法访问此网站 localhost 拒绝了连接
```

#### 解决方案：
1. **检查Tomcat是否启动**：
   - 查看控制台输出
   - 确认看到 "Running war on http://localhost:8080/" 信息

2. **检查防火墙设置**：
   - Windows：允许Java和Maven通过防火墙
   - Linux：配置iptables规则

3. **验证项目路径**：
   - 确认访问URL正确
   - 检查web.xml配置

### 5. 前端功能异常

#### 问题描述：
```
JavaScript错误或功能不工作
```

#### 解决方案：
1. **打开浏览器开发者工具**：
   - 按F12打开控制台
   - 查看Console标签页的错误信息

2. **检查网络请求**：
   - 查看Network标签页
   - 确认API请求是否成功

3. **验证后端API**：
   - 直接访问API端点
   - 检查返回的JSON数据

### 6. 依赖冲突

#### 问题描述：
```
java.lang.NoSuchMethodError 或 ClassNotFoundException
```

#### 解决方案：
1. **检查依赖版本**：
   ```bash
   mvn dependency:tree
   ```

2. **排除冲突依赖**：
   在pom.xml中添加exclusion标签

3. **更新依赖版本**：
   使用兼容的版本组合

## 🛠️ 诊断工具

### 1. 系统状态检查
```bash
# 检查Java版本
java -version

# 检查Maven版本
mvn -version

# 检查MySQL状态
mysql --version
```

### 2. 网络连接测试
```bash
# 测试Maven仓库连接
ping repo.maven.apache.org

# 测试本地端口
telnet localhost 8080
```

### 3. 日志查看
```bash
# 查看Maven详细日志
mvn -X tomcat7:run

# 查看Tomcat日志
tail -f target/tomcat/logs/catalina.out
```

## 📋 检查清单

在启动系统前，请确认：

- [ ] Java JDK 8+ 已安装并配置
- [ ] Maven 3.6+ 已安装并配置
- [ ] MySQL 5.7+ 已安装并运行
- [ ] 数据库已创建并包含必要表
- [ ] 端口8080未被占用
- [ ] 网络连接正常
- [ ] 防火墙设置正确

## 🆘 获取帮助

如果以上方法都无法解决问题：

1. **查看详细错误日志**：
   ```bash
   mvn -X clean compile
   mvn -X tomcat7:run
   ```

2. **检查项目配置**：
   - 验证所有配置文件
   - 确认依赖版本兼容性

3. **搜索解决方案**：
   - 查看Stack Overflow
   - 搜索GitHub Issues
   - 查阅官方文档

4. **联系技术支持**：
   - 提供详细的错误信息
   - 包含系统环境信息
   - 附上完整的日志文件

---

**记住：大多数问题都有解决方案，保持耐心，逐步排查！** 💪 